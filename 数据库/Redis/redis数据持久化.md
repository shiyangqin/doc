# redis数据持久化

redis数据持久化有两种方式：

1. RDB：按指定的时间间隔执行数据集的时间点快照。
2. AOF：记录服务器接收的每个写入操作，这些操作将在服务器启动时再次执行，以重建原始数据集。使用与Redis协议本身相同的格式记录命令，并且仅采用追加方式。当日志太大时，Redis可以在后台重写日志。

## RDB

根据redis的配置文件中的save m n定时触发（至少更新了n个键或者每m秒自动保存一次）

优点：可以获取不同时间节点的全量数据快照，文件小，重启速度更快

缺点：最后一次保存快照之后的操作没有保存，大量的IO操作严重影响性能

## AOF

AOF有三种策略：不保存、每秒钟保存一次（默认，一般都采用这种方式）、每执行一个命令保存一次。

优点：采用默认策略的情况下，最多只会丢失1秒的数据，可读性高

缺点：文件太大，恢复时间长
