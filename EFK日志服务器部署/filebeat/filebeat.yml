filebeat.inputs:
  - type: log
    enabled: true
    paths:
      - /opt/logs/**/*.log
    fields:
      IP: "服务器IP"
    fields_under_root: true
    multiline:
      pattern: '^\d{4}-\d{2}-\d{2}'
      negate: true
      match: after
    tags: ["log"]
    symlinks: true

output.elasticsearch:
  hosts: ["es服务器IP:9200"]
  pipelines:
    - pipeline: "log-pipeline"
      when.contains:
        tags: "log"
  indices:
    - index: "log-%{[agent.version]}-%{+yyyy.MM.dd}"
      when.contains:
        tags: "log"
